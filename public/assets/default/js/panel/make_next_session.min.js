!function(e){"use strict";e("body").on("click",".js-webinar-next-session",function(n){n.preventDefault();var s=e(this).attr("data-webinar-id");loadingSwl(),e.get("/panel/webinars/"+s+"/getNextSessionInfo",function(n){if(n&&200===n.code){var s=n.session,a=e("#webinarNextSessionModal").clone();a=a.prop("innerHTML"),null!==s&&(a=a.replace(/\[new\]/g,"["+s.id+"]"));var i='<div id="webinarNextSessionHtml">'+a+"</div>";Swal.fire({html:i,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem",onOpen:function(){var a=e("#webinarNextSessionHtml"),i="new";null!==s&&(a.find("form").attr("action","/panel/sessions/"+s.id+"/update"),Object.keys(s).forEach(function(e){a.find('[name="ajax['+s.id+"]["+e+']"]').val(s[e])}),i=s.id),a.find('[name="ajax['+i+'][webinar_id]"]').val(n.webinar_id),"local"!==s.session_api&&(a.find('[name="ajax['+s.id+'][session_api]"]').prop("disabled",!0),a.find('[name="ajax['+s.id+'][api_secret]"]').prop("disabled",!0),a.find('[name="ajax['+s.id+'][link]"]').prop("disabled",!0),a.find('[name="ajax['+s.id+'][date]"]').prop("disabled",!0),a.find('[name="ajax['+s.id+'][duration]"]').prop("disabled",!0)),"big_blue_button"===s.session_api?(a.find(".js-moderator-secret").removeClass("d-none"),a.find('[name="ajax['+s.id+'][moderator_secret]"]').prop("disabled",!0)):a.find(".js-moderator-secret").addClass("d-none"),"zoom"===s.session_api&&a.find(".js-api-secret").addClass("d-none"),resetDatePickers()}})}}).fail(function(e){Swal.fire({icon:"error",html:'<h3 class="font-20 text-center text-dark-blue">'+undefinedActiveSessionLang+"</h3>",showConfirmButton:!1})})}),e("body").on("click",".js-save-next-session",function(n){n.preventDefault();var s=e(this),a=s.closest("form"),i=serializeObjectByTag(a),o=a.attr("action");s.addClass("loadingbar primary").prop("disabled",!0),a.find("input").removeClass("is-invalid"),a.find("textarea").removeClass("is-invalid"),e.post(o,i,function(e){e&&200===e.code&&(Swal.fire({icon:"success",html:'<h3 class="font-20 text-center text-dark-blue py-25">'+saveSuccessLang+"</h3>",showConfirmButton:!1,width:"25rem"}),setTimeout(function(){window.location.reload()},500))}).fail(function(e){s.removeClass("loadingbar primary").prop("disabled",!1);var n=e.responseJSON;n&&n.errors&&Object.keys(n.errors).forEach(function(e){var s=n.errors[e],i=a.find(".js-ajax-"+e);i.addClass("is-invalid"),i.parent().find(".invalid-feedback").text(s[0])})})}),e("body").on("change",".js-ajax-session_api",function(n){n.preventDefault();var s=e(this).closest("form"),a=this.value;"big_blue_button"===a?(s.find(".js-local-link").addClass("d-none"),s.find(".js-api-secret").removeClass("d-none"),s.find(".js-moderator-secret").removeClass("d-none")):"zoom"===a?(s.find(".js-local-link").addClass("d-none"),s.find(".js-api-secret").addClass("d-none"),s.find(".js-moderator-secret").addClass("d-none")):(s.find(".js-local-link").removeClass("d-none"),s.find(".js-api-secret").removeClass("d-none"),s.find(".js-moderator-secret").addClass("d-none"))}),e("body").on("change","#conductedSwitch",function(n){n.preventDefault(),e(this).closest("form").trigger("submit")}),e("body").on("change","#freeClassesSwitch",function(n){n.preventDefault(),e(this).closest("form").trigger("submit")})}(jQuery);
