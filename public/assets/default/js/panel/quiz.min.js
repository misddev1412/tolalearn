!function(t){"use strict";function e(){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",i=0;i<5;i++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}t("body").on("click","#add_multiple_question",function(i){i.preventDefault();var n=t(this).attr("data-quiz-id"),a=t(".multipleQuestionModal"+n).clone(),r="correctAnswerSwitch"+e();a.find("label.js-switch").attr("for",r),a.find("input.js-switch").attr("id",r);var s=e();a.find(".panel-file-manager").attr("data-input",s),a.find(".lfm-input").attr("id",s),a.find(".main-answer-row").removeClass("main-answer-row").addClass("main-answer-box"),Swal.fire({html:a.html(),showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem"})}),t("body").on("click",".add-answer-btn",function(i){i.preventDefault();var n=t(".add-answer-container .main-answer-box"),a=n.clone();a.removeClass("main-answer-box"),a.find(".answer-remove").removeClass("d-none");var r="correctAnswerSwitch"+e();a.find("label.js-switch").attr("for",r),a.find("input.js-switch").attr("id",r);var s=e();a.find(".panel-file-manager").attr("data-input",s),a.find(".lfm-input").attr("id",s),a.find('input[type="checkbox"]').prop("checked",!1);var o=a.prop("innerHTML"),d=e();o=(o=o.replace(/\[record\]/g,"["+d+"]")).replace(/\[\d+\]/g,"["+d+"]"),a.html(o),a.find('input[type="checkbox"]').prop("checked",!1),a.find('input[type="text"]').val(""),n.parent().append(a)}),t("body").on("click",".answer-remove",function(e){e.preventDefault(),t(this).closest(".add-answer-card").remove()}),t("body").on("click","#add_descriptive_question",function(e){e.preventDefault();var i=t(this).attr("data-quiz-id"),n=t(".descriptiveQuestionModal"+i).clone();Swal.fire({html:n.html(),showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem"})}),t("body").on("change",".js-switch",function(){var e=t(this);e.closest(".js-switch-parent");this.checked&&(t(".js-switch").each(function(){t(this).closest(".js-switch-parent").find('input[type="checkbox"]').prop("checked",!1)}),e.prop("checked",!0))}),t("body").on("click",".save-question",function(e){e.preventDefault();var i=t(this),n=i.closest(".quiz-questions-form"),a=serializeObjectByTag(n),r=n.attr("data-action");i.addClass("loadingbar primary").prop("disabled",!0),n.find("input").removeClass("is-invalid"),n.find("textarea").removeClass("is-invalid"),t.post(r,a,function(t){t&&200===t.code&&(Swal.fire({icon:"success",html:'<h3 class="font-20 text-center text-dark-blue py-25">Item added</h3>',showConfirmButton:!1,width:"25rem"}),setTimeout(function(){window.location.reload()},500))}).fail(function(t){i.removeClass("loadingbar primary").prop("disabled",!1);var e=t.responseJSON;e&&e.errors&&Object.keys(e.errors).forEach(function(t){var i=e.errors[t],a=n.find(".js-ajax-"+t);a.addClass("is-invalid"),a.parent().find(".invalid-feedback").text(i[0])})})}),t("body").on("click",".edit_question",function(i){i.preventDefault();var n=t(this).attr("data-question-id");loadingSwl(),t.get("/panel/quizzes-questions/"+n+"/edit",function(i){if(i&&i.html){var n='<div id="editQuestion">'+i.html+"</div>";Swal.fire({html:n,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem",onOpen:function(){var i=t("#editQuestion");i.find(".main-answer-row").removeClass("main-answer-row").addClass("main-answer-box");var n=e();i.find(".panel-file-manager").first().attr("data-input",n),i.find(".lfm-input").first().attr("id",n);var a="correctAnswerSwitch"+e();i.find("label.js-switch").first().attr("for",a),i.find("input.js-switch").first().attr("id",a),feather.replace()}})}})}),t("body").on("click",".js-submit-quiz-form",function(e){e.preventDefault();var i=t(this),n=i.closest(".quiz-form"),a=serializeObjectByTag(n),r=n.attr("data-action");i.addClass("loadingbar primary").prop("disabled",!0),n.find("input").removeClass("is-invalid"),n.find("textarea").removeClass("is-invalid"),t.post(r,a,function(t){t&&200===t.code&&(Swal.fire({icon:"success",html:'<h3 class="font-20 text-center text-dark-blue">Item added</h3>',showConfirmButton:!1}),setTimeout(function(){t.redirect_url&&""!==t.redirect_url?window.location.href=t.redirect_url:window.location.reload()},2e3))}).fail(function(t){i.removeClass("loadingbar primary").prop("disabled",!1);var e=t.responseJSON;e&&e.errors&&Object.keys(e.errors).forEach(function(t){var i=e.errors[t],a=n.find(".js-ajax-"+t);a.addClass("is-invalid"),a.parent().find(".invalid-feedback").text(i[0])})})})}(jQuery);
