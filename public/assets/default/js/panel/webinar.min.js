!function(e){"use strict";function t(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",n=0;n<5;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}function n(t,n){var r=serializeObjectByTag(t),o=t.attr("data-action");n.addClass("loadingbar primary").prop("disabled",!0),t.find("input").removeClass("is-invalid"),t.find("textarea").removeClass("is-invalid"),e.post(o,r,function(e){e&&200===e.code&&(Swal.fire({icon:"success",html:'<h3 class="font-20 text-center text-dark-blue py-25">'+saveSuccessLang+"</h3>",showConfirmButton:!1,width:"25rem"}),setTimeout(function(){window.location.reload()},500))}).fail(function(e){n.removeClass("loadingbar primary").prop("disabled",!1);var r=e.responseJSON;r&&"zoom_jwt_token_invalid"===r.status&&Swal.fire({icon:"error",html:'<h3 class="font-20 text-center text-dark-blue py-25">'+zoomJwtTokenInvalid+"</h3>",showConfirmButton:!1,width:"25rem"}),r&&r.errors&&Object.keys(r.errors).forEach(function(e){var n=r.errors[e],o=t.find(".js-ajax-"+e);"zoom-not-complete-alert"===e?t.find(".js-zoom-not-complete-alert").removeClass("d-none"):(o.addClass("is-invalid"),o.parent().find(".invalid-feedback").text(n[0]))})})}e("#summernote").length&&e("#summernote").summernote({tabsize:2,height:400,placeholder:e("#summernote").attr("placeholder"),dialogsInBody:!0,toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]]}),e("body").on("click","#sendForReview",function(t){e(this).addClass("loadingbar primary").prop("disabled",!0),t.preventDefault(),e("#forDraft").val(0),e("#webinarForm").trigger("submit")}),e("body").on("click","#saveAsDraft",function(t){e(this).addClass("loadingbar primary").prop("disabled",!0),t.preventDefault(),e("#forDraft").val(1),e("#webinarForm").trigger("submit")}),e("body").on("click","#getNextStep",function(t){e(this).addClass("loadingbar primary").prop("disabled",!0),t.preventDefault(),e("#forDraft").val(1),e("#getNext").val(1),e("#webinarForm").trigger("submit")}),e("body").on("click",".js-get-next-step",function(t){if(t.preventDefault(),!e(this).hasClass("active")){e(this).addClass("loadingbar primary").prop("disabled",!0);var n=e(this).attr("data-step");e("#getStep").val(n),e("#forDraft").val(1),e("#getNext").val(1),e("#webinarForm").trigger("submit")}}),e("#partnerInstructorSwitch").on("change.bootstrapSwitch",function(t){t.target.checked?(e("#partnerInstructorInput").removeClass("d-none"),panelSearchUserSelect2()):e("#partnerInstructorInput").addClass("d-none")}),e("body").on("change","#categories",function(t){t.preventDefault();var n=this.value;e.get("/panel/filters/get-by-category-id/"+n,function(t){if(t&&void 0!==t.filters&&t.filters.length){var n="";Object.keys(t.filters).forEach(function(e){var r=t.filters[e],o=[];r.options.length&&(o=r.options),n+='<div class="col-12 col-md-3">\n<div class="webinar-category-filters">\n<strong class="category-filter-title d-block">'+r.title+'</strong>\n<div class="py-10"></div>\n\n',o.length&&Object.keys(o).forEach(function(e){var t=o[e];n+='<div class="form-group mt-20 d-flex align-items-center justify-content-between">\n<label class="cursor-pointer" for="filterOption'+t.id+'">'+t.title+'</label>\n<div class="custom-control custom-checkbox">\n<input type="checkbox" name="filters[]" value="'+t.id+'" class="custom-control-input" id="filterOption'+t.id+'">\n<label class="custom-control-label" for="filterOption'+t.id+'"></label>\n</div>\n</div>\n'}),n+="</div></div>"}),e("#categoriesFiltersContainer").removeClass("d-none"),e("#categoriesFiltersCard").html(n)}else e("#categoriesFiltersContainer").addClass("d-none"),e("#categoriesFiltersCard").html("")})}),e("body").on("click",".cancel-accordion",function(t){t.preventDefault(),e(this).closest(".accordion-row").remove()}),e("body").on("click","#webinarAddTicket",function(n){n.preventDefault();var r=t(),o=e("#newTicketForm").html();o=o.replaceAll("record",r),e("#ticketsAccordion").prepend(o),resetDatePickers(),feather.replace()}),e("body").on("click",".js-save-ticket",function(t){t.preventDefault();var r=e(this);n(r.closest(".ticket-form"),r)}),e("body").on("click","#webinarAddSession",function(n){n.preventDefault();var r=t(),o=e("#newSessionForm").html();o=o.replaceAll("record",r),e("#sessionsAccordion").prepend(o),resetDatePickers(),feather.replace()}),e("body").on("click",".js-save-session",function(t){t.preventDefault();var r=e(this);n(r.closest(".session-form"),r)}),e("body").on("click","#webinarAddFile",function(n){n.preventDefault();var r=t(),o=e("#newFileForm").html();o=o.replaceAll("record",r),e("#filesAccordion").prepend(o),resetDatePickers(),feather.replace()}),e("body").on("click",".js-save-file",function(t){t.preventDefault();var r=e(this);n(r.closest(".file-form"),r)}),e("body").on("click","#AddTextLesson",function(n){n.preventDefault();var r=t(),o=e("#newTextLessonForm").html();o=(o=(o=(o=o.replaceAll("record",r)).replaceAll("attachments-select2","attachments-select2-"+r)).replaceAll("js-content-summernote","js-content-summernote-"+r)).replaceAll("js-hidden-content-summernote","js-hidden-content-summernote-"+r),e("#text_lessonsAccordion").prepend(o),e(".attachments-select2-"+r).select2({multiple:!0,width:"100%"}),e(".js-content-summernote-"+r).summernote({tabsize:2,height:400,callbacks:{onChange:function(t,n){e(".js-hidden-content-summernote-"+r).val(t)}}}),feather.replace()}),e("body").on("click",".js-save-text_lesson",function(t){t.preventDefault();var r=e(this);n(r.closest(".text_lesson-form"),r)}),e(document).ready(function(){var t=e("#text_lessonsAccordion .js-content-summernote");t.length&&t.summernote({tabsize:2,height:400,callbacks:{onChange:function(t,n){e(".js-hidden-content-summernote").val(t)}}}),setTimeout(function(){var t;(t=e("body #prerequisitesAccordion .prerequisites-select2")).length&&t.select2({minimumInputLength:3,allowClear:!0,ajax:{url:"/panel/webinars/search",dataType:"json",type:"POST",quietMillis:50,data:function(t){return{term:t.term,webinar_id:e(this).data("webinar-id")}},processResults:function(t){return{results:e.map(t,function(e){return{text:e.title,id:e.id}})}}}}),e("#text_lessonsAccordion .attachments-select2").length&&e("#text_lessonsAccordion .attachments-select2").select2({multiple:!0,width:"100%"})},1e3)}),e("body").on("click","#webinarAddPrerequisites",function(n){n.preventDefault();var r=t(),o=e("#newPrerequisiteForm").html();o=(o=o.replaceAll("record",r)).replaceAll("prerequisites-select2","prerequisites-select2-"+r),e("#prerequisitesAccordion").prepend(o),e(".prerequisites-select2-"+r).select2({placeholder:e(this).data("placeholder"),minimumInputLength:3,allowClear:!0,ajax:{url:"/panel/webinars/search",dataType:"json",type:"POST",quietMillis:50,data:function(t){return{term:t.term,webinar_id:e(this).data("webinar-id")}},processResults:function(t){return{results:e.map(t,function(e){return{text:e.title,id:e.id}})}}}}),feather.replace()}),e("body").on("click",".js-save-prerequisite",function(t){t.preventDefault();var r=e(this);n(r.closest(".prerequisite-form"),r)}),e("body").on("click","#webinarAddFAQ",function(n){n.preventDefault();var r=t(),o=e("#newFaqForm").html();o=o.replaceAll("record",r),e("#faqsAccordion").prepend(o),feather.replace()}),e("body").on("click",".js-save-faq",function(t){t.preventDefault();var r=e(this);n(r.closest(".faq-form"),r)}),e("body").on("click","#webinarAddQuiz",function(n){n.preventDefault();var r=t(),o=e("#newQuizForm").html();o=o.replaceAll("record",r),e("#quizzesAccordion").prepend(o),feather.replace()}),e("body").on("click",".js-save-quiz",function(t){t.preventDefault();var r=e(this);n(r.closest(".quiz-form"),r)}),e(document).ready(function(){function t(t){t.length&&t.sortable({group:"no-drop",handle:".move-icon",axis:"y",update:function(n,r){var o=t.sortable("toArray",{attribute:"data-id"});!function(t,n){e.post("/panel/webinars/order-items",{table:t,items:n},function(e){})}(n.target.getAttribute("data-order-table"),o.join(","))}})}var n=e(".draggable-lists"),r=e(".draggable-lists2"),o=e(".draggable-lists3");t(n),r.length&&t(r),o.length&&t(o)}),e("body").on("change",".js-file-storage",function(t){t.preventDefault();var n=e(this).attr("value"),r=e(this).closest(".file-form");this.checked&&"online"===n?(r.find(".local-input").addClass("d-none"),r.find(".online-inputs").removeClass("d-none"),r.find(".js-downloadable-file").addClass("d-none"),r.find(".js-downloadable-file input").prop("checked",!1)):(r.find(".local-input").removeClass("d-none"),r.find(".online-inputs").addClass("d-none"),r.find(".js-downloadable-file").removeClass("d-none"),r.find(".js-downloadable-file input").prop("checked",!0))}),e("body").on("change",".js-api-input",function(t){t.preventDefault();var n=e(this).closest(".session-form"),r=this.value;n.find(".js-zoom-not-complete-alert").addClass("d-none"),"big_blue_button"===r?(n.find(".js-local-link").addClass("d-none"),n.find(".js-api-secret").removeClass("d-none"),n.find(".js-moderator-secret").removeClass("d-none")):"zoom"===r?(n.find(".js-local-link").addClass("d-none"),n.find(".js-api-secret").addClass("d-none"),n.find(".js-moderator-secret").addClass("d-none"),hasZoomApiToken&&"true"!==hasZoomApiToken&&n.find(".js-zoom-not-complete-alert").removeClass("d-none")):(n.find(".js-local-link").removeClass("d-none"),n.find(".js-api-secret").removeClass("d-none"),n.find(".js-moderator-secret").addClass("d-none"))})}(jQuery);
