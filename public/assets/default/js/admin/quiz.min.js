!function(t){"use strict";function e(){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",n=0;n<5;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}t("body").on("click","#add_multiple_question",function(n){n.preventDefault();var i=t("#multipleQuestionModal").clone(),a="correctAnswerSwitch"+e();i.find("label.js-switch").attr("for",a),i.find("input.js-switch").attr("id",a);var r=e();i.find(".panel-file-manager").attr("data-input",r),i.find(".lfm-input").attr("id",r),i.find(".main-answer-row").removeClass("main-answer-row").addClass("main-answer-box"),Swal.fire({html:i.html(),showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem"})}),t("body").on("click",".add-answer-btn",function(n){n.preventDefault();var i=t(".add-answer-container .main-answer-box"),a=i.clone();a.removeClass("main-answer-box"),a.find(".answer-remove").removeClass("d-none");var r="correctAnswerSwitch"+e();a.find("label.js-switch").attr("for",r),a.find("input.js-switch").attr("id",r);var o=e();a.find(".panel-file-manager").attr("data-input",o),a.find(".lfm-input").attr("id",o),a.find('input[type="checkbox"]').prop("checked",!1);var s=a.prop("innerHTML"),c=e();s=(s=s.replace(/\[record\]/g,"["+c+"]")).replace(/\[\d+\]/g,"["+c+"]"),a.html(s),a.find('input[type="checkbox"]').prop("checked",!1),a.find('input[type="text"]').val(""),i.parent().append(a)}),t("body").on("click",".answer-remove",function(e){e.preventDefault(),t(this).closest(".add-answer-card").remove()}),t("body").on("click","#add_descriptive_question",function(e){e.preventDefault();var n=t("#descriptiveQuestionModal").clone();Swal.fire({html:n.html(),showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem"})}),t("body").on("change",".js-switch",function(){var e=t(this);e.closest(".js-switch-parent");this.checked&&(t(".js-switch").each(function(){t(this).closest(".js-switch-parent").find('input[type="checkbox"]').prop("checked",!1)}),e.prop("checked",!0))}),t("body").on("click",".save-question",function(e){e.preventDefault();var n=t(this),i=n.closest("form"),a=i.serializeObject(),r=i.attr("action");n.addClass("loadingbar primary").prop("disabled",!0),i.find("input").removeClass("is-invalid"),i.find("textarea").removeClass("is-invalid"),t.post(r,a,function(t){t&&200===t.code&&(Swal.fire({icon:"success",html:'<h3 class="font-20 text-center text-dark-blue py-25">'+saveSuccessLang+"</h3>",showConfirmButton:!1,width:"25rem"}),setTimeout(function(){window.location.reload()},500))}).fail(function(t){n.removeClass("loadingbar primary").prop("disabled",!1);var e=t.responseJSON;e&&e.errors&&Object.keys(e.errors).forEach(function(t){var n=e.errors[t],a=i.find('[name="'+t+'"]');a.addClass("is-invalid"),a.parent().find(".invalid-feedback").text(n[0])})})}),t("body").on("click",".edit_question",function(n){n.preventDefault();var i=t(this).attr("data-question-id");loadingSwl(),t.get("/admin/quizzes-questions/"+i+"/edit",function(n){if(n&&n.html){var i='<div id="editQuestion">'+n.html+"</div>";Swal.fire({html:i,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem",onOpen:function(){var n=t("#editQuestion");n.find(".main-answer-row").removeClass("main-answer-row").addClass("main-answer-box");var i=e();n.find(".panel-file-manager").first().attr("data-input",i),n.find(".lfm-input").first().attr("id",i);var a="correctAnswerSwitch"+e();n.find("label.js-switch").first().attr("for",a),n.find("input.js-switch").first().attr("id",a),feather.replace()}})}})})}(jQuery);
